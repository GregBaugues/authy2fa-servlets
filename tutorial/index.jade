.step(data-title='How it Works',
  data-file='src/main/java/com/twilio/authy2fa/servlet/RegistrationServlet.java')
  :markdown
    ## About this application

    This [Java Servlets](//docs.oracle.com/javaee/6/tutorial/doc/bnafd.html)
    sample application demonstrates two-factor authentication (2FA) using Authy.
    To run this sample app yourself, [download the code and follow the
    instructions on GitHub](https://github.com/TwilioDevEd/authy2fa-servlets).

    Adding 2FA to your web application increases the security of your user's
    data. [Multi-factor
    authentication](http://en.wikipedia.org/wiki/Multi-factor_authentication)
    determines the identity of a user by validating once by logging into the
    app, and second by validating their mobile device.

    For the second factor, we will validate that the user has their mobile phone by either:

    * Sending them a OneTouch push notification to their mobile Authy app or
    * Sending them a token through their mobile Authy app or
    * Sending them a one-time token in a text message [sent with Authy via
    Twilio](http://www.authy.com/). Here's how this works at a high level:

    ![2FA High Level](//s3.amazonaws.com/howtodocs/2fa-high-level.png)

    Let's get started! Click the right arrow above to move to the next step of
    the tutorial.

    ---

    **See Also:**

    * [What is a Servlet](http://docs.oracle.com/javaee/6/tutorial/doc/bnafe.html)

.step(data-title='Configuring Authy',
  data-file='src/main/java/com/twilio/authy2fa/servlet/RegistrationServlet.java',
  data-highlight="28")
  :markdown
    ## Configuring Authy

    If you haven't already, now is the time to [sign up for
    Authy](https://dashboard.authy.com/signup). Create your first application,
    naming it whatever you wish. After you create your application, your
    "production" API key will be visible on your
    [dashboard](https://dashboard.authy.com):

    ![Authy Dashboard](//s3.amazonaws.com/howtodocs/2fa-authy-dashboard.png)

    Once we have an Authy API key, we set it as an environment variable.

    ---

    **See Also:**

    * [Authy Java](//github.com/authy/authy-java/)
    * [Querying Environment Variables](//docs.oracle.com/javase/tutorial/essential/environment/env.html)

.step(data-file='src/main/java/com/twilio/authy2fa/servlet/RegistrationServlet.java',
  data-highlight="56-62")
  :markdown
    ## Registering a User with Authy

    When a new User signs up for our website, we call this controller, which
    handles saving our new User to the database as well as registering the User
    with Authy.

    All Authy needs to get a user set up for your application is the email,
    phone number and country code. In order to do two-factor authentication,
    we need to make sure we ask for these things at the point of sign up.

    Once we register the User with Authy we get an `authyUser` back. This is
    very important since it's how we will verify the identity of our User with
    Authy.

    ---

    **See Also:**

    * [Enabling a User with Authy](//docs.authy.com/totp.html#enabling-two-factor-authentication-for-a-user)

